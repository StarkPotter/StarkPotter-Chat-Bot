<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>BOT_StarkPotter</title>
<style>
  body{font-family:Poppins, sans-serif;background:#111;color:#fff;
       display:flex;flex-direction:column;align-items:center;height:100vh;margin:0;}
  h1{color:#00b4d8;text-shadow:0 0 10px #00b4d8;}
  #chat{width:90%;max-width:600px;height:70vh;overflow-y:auto;
        background:#1b1b1d;border-radius:15px;padding:20px;}
  .msg{margin:8px 0;padding:10px 15px;border-radius:12px;max-width:80%;}
  .user{background:#00b4d8;color:#fff;margin-left:auto;}
  .bot{background:#2b2b2e;color:#f1faee;}
  #inputArea{margin-top:10px;display:flex;width:90%;max-width:600px;}
  input{flex:1;padding:10px;border:none;border-radius:10px;background:#2b2b2e;color:#fff;}
  button{background:#00b4d8;color:#fff;border:none;padding:10px 15px;margin-left:8px;
         border-radius:10px;cursor:pointer;}
  .typing{color:#aaa;font-style:italic;margin:5px;}
</style>
</head>
<body>
<h1>ðŸ¤– BOT_StarkPotter</h1>
<div id="chat"></div>
<div id="inputArea">
  <input id="msg" placeholder="Ask me anything..." autocomplete="off">
  <button onclick="sendMsg()">Send</button>
</div>

<script>
const chat=document.getElementById("chat");
const input=document.getElementById("msg");
let history=[];

function append(text,cls){const d=document.createElement("div");
 d.className="msg "+cls;d.textContent=text;chat.appendChild(d);chat.scrollTop=chat.scrollHeight;}

async function sendMsg(){
 const text=input.value.trim(); if(!text)return;
 append(text,"user"); history.push({role:"user",content:text}); input.value="";
 const typing=document.createElement("div");typing.className="typing";typing.textContent="BOT_StarkPotter is typing...";chat.appendChild(typing);
 try{
   const res=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},
     body:JSON.stringify({message:text})});
   const data=await res.json();
   typing.remove();
   append(data.reply,"bot");
   history.push({role:"assistant",content:data.reply});
 }catch(e){typing.remove();append("Error: "+e.message,"bot");}
}
</script>
</body>
</html>
